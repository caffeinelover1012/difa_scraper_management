{% extends "datasets/base.html" %}

{% block title %}{{ dataset.dataset_name }}{% endblock %}

{% block content %}
<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">DIFA Scraper Management Utility</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="{% url 'datasets' %}">Datasets</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://docs.google.com/spreadsheets/d/1X2CEttMDzb8ef_lUpXfXDNd4wMRHBJk3/edit#gid=1527990151">Current Google Sheet</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{% url 'modification_requests' %}">Modifications Portal</a>
        </li>
      </ul>
      <span class="navbar-text">
        Logged in as {{ request.user.username }}
      </span>
      <a class="btn btn-outline-danger ms-2" href="{% url 'logout' %}">Logout</a>
    </div>
  </div>
</nav>

  <h2 class="text-center">{{ dataset.dataset_name }}</h2>
  <table class="table table-striped table-bordered mx-auto" style="width: 80%;">
    <tbody>
      <tr>
        <th>ID</th>
        <td>{{ dataset.id }}</td>
      </tr>
      <tr>
        <th>Name</th>
        <td>{{ dataset.dataset_name }}</td>
      </tr>
      <tr>
        <th>About</th>
        <td>{{ dataset.about_info }}</td>
      </tr>
      <tr>
        <th>Last Updated</th>
        <td>{{ dataset.last_updated }}</td>
      </tr>
      <tr>
        <th>File Format</th>
        <td>{{ dataset.dataset_file_format }}</td>
      </tr>
      <tr>
        <th>Status</th>
        <td{% if dataset.dataset_status|lower == 'active' %} class="text-success"{% else %} class="text-danger"{% endif %}>{{ dataset.dataset_status }}</td>
      </tr>
      <tr>
        <th>Sponsor Name</th>
        <td>{{ dataset.sponsor_name }}</td>
      </tr>
      <tr>
        <th>Access Type</th>
        <td>{{ dataset.access_type }}</td>
      </tr>
      <tr>
        <th>Dataset Link</th>
        <td>{{ dataset.dataset_link|urlize }}</td>
      </tr>
      <tr>
        <th>Dataset Website Link</th>
        <td>{{ dataset.dataset_website_link|urlize }}</td>
      </tr>
      <tr>
        <th>Dataset Citation</th>
        <td>{{ dataset.dataset_citation }}</td>
      </tr>
      <tr>
        <th>Dataset Collection Method</th>
        <td>{{ dataset.dataset_collection_method }}</td>
      </tr>
      <tr>
        <th>Other Info</th>
        <td>{{ dataset.other_info }}</td>
      </tr>
    </tbody>
  </table>
  <div class="text-center mt-3">
    <form method="POST" action="{% url 'scrape_dataset' dataset_id=dataset.id %}">
      {% csrf_token %}
      <button type="submit" class="btn btn-primary">Scrape Again</button>
      <a href="{% url 'export_dataset' dataset_id=dataset.id %}" class="btn btn-success ms-3" role="button">Export to Google Sheets</a>
    </form>
  </div>

{% endblock %}